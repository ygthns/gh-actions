name: Deploy Project
on: [push, workflow_dispatch] # Trigger case, run it on push. We can also add multiple events, that means i can trigger tis event also manually too.
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Get code
        uses: actions/checkout@v3 # Hazir marketplace actionslarini bu sekilde kullaniyoruz. 'run' yerine 'uses'. with ile bir parametre eklemedim cunku default olarak attached oldugu repositoryde calisir
      - name: Install NodeJS # Zorunlu degil cunku github runnerlarinda otomatik olarak yuklu geliyor.
        uses: actions/setup-node@v3
        with:
          node-version: 18
      - name: Install dependicies
        run: npm ci
      - name: Run tests
        run: npm test
      - name: Upload artifacts
        uses: actions/upload-artifact@v3
        with:
          name: dist-files
          path: |
            dist
            package.json
  deploy:
    needs: test # Deploy job needs test job to finish to start.
    runs-on: ubuntu-latest
    steps:
      - name: Get code
        uses: actions/checkout@v3 
      - name: Install NodeJS 
        uses: actions/setup-node@v3
        with:
          node-version: 18
      - name: Install dependicies
        run: 
        




















        